<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>

<h2>
	Conversion
</h2>

Amount: <input type="number" id="fromAmount" name="fromAmount" value="20" /><br>
In currency: <input type="text" id="fromCurrency" name="fromCurrency" value="EUR" /><br>
Target currency: <input type="text" id="toCurrency" name="toCurrency" value="USD" /><br>
Date: <input type="date" id="date" name="date" /><br>
Amount in target currency: <span id="toAmount" name="toAmount"></span><br>


<button onclick="calculate()">Calculate</button>

<script type="text/javascript">
	function calculate()
	{
		var fromAmount = $("#fromAmount").val();
		var fromCurrency = $("#fromCurrency").val();
		var toCurrency = $("#toCurrency").val();
		var selectedDate = $("#date").val();
		
		var dateSuffix = selectedDate == "" ? "" : `?date=${selectedDate}`;		
		var url = `http://localhost:37646/api/FxConversions/${fromCurrency}/${fromAmount}/${toCurrency}${dateSuffix}`;
		
		$.get(url)
			.done(function(data) {
				$("#toAmount").html(data);
			})
			.fail(function(jqXHR, textStatus, errorThrown) {
				alert("Error. Status: " + textStatus + ". " + errorThrown);
			});
	}
</script>

</body>
<html>